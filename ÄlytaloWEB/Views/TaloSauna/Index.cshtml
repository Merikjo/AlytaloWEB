@model IEnumerable<ÄlytaloWEB.ViewModels.SaunaViewModel>

@{
    ViewBag.Title = "Index";
}


<link href="~/Content/Site.css" rel="stylesheet" />


<div class="w3-container">
    <div class="background">
        <div class="jumbotron">

            <h2>KotiSauna</h2>

            @*<div>@DateTime.Now.ToString()</div>*@

            <p id="demo"></p>

            <p id="countdown"></p>

            <script>
                var myVar = setInterval(myTimer, 1000);

                function myTimer() {
                    var d = new Date();
                    document.getElementById("demo").innerHTML = d.toLocaleTimeString();
                }
            </script>

            <script>
            var dt = '@ViewBag.EndDate';
            var dateAr = dt.split('-');
            var newDate = dateAr[1] + '/' + dateAr[0] + '/' + dateAr[2];

            var end = new Date(dateAr[1] + '/' + dateAr[0] + '/' + dateAr[2]);

            var _second = 1000;
            var _minute = _second * 60;
            var _hour = _minute * 60;
            var _day = _hour * 24;
            var timer;

            function showRemaining()
            {
            var now = new Date();
            var distance = end - now;
            if (distance & lt; 0) {
            clearInterval(timer);
            document.getElementById('countdown').innerHTML = 'EXPIRED!';
            window.location.href = '/TaloSauna/Index';

            return;
            }
            var days = Math.floor(distance / _day);
            var hours = Math.floor((distance % _day) / _hour);
            var minutes = Math.floor((distance % _hour) / _minute);
            var seconds = Math.floor((distance % _minute) / _second);


            document.getElementById('countdown').innerHTML = hours + 'hrs ';
            document.getElementById('countdown').innerHTML += minutes + 'mins ';
            document.getElementById('countdown').innerHTML += seconds + 'secs';
            }

            timer = setInterval(showRemaining, 1000);

            </script>

            <p>
                @Html.ActionLink("Create New", "Create")
            </p>
            <table class="table">
                <tr>
                    <th>
                        @Html.DisplayNameFor(model => model.SaunaNro)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.SaunanNimi)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.SaunaTavoiteLampotila)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.SaunaNykyLampotila)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.SaunanTila)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.SaunaStart)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.SaunaStop)
                    </th>
                    @*<th>
                        @Html.DisplayNameFor(model => model.TotalHours)
                    </th>*@

                    <th></th>
                </tr>

                @foreach (var item in Model)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.SaunaNro)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.SaunanNimi)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.SaunaTavoiteLampotila)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.SaunaNykyLampotila)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.SaunanTila)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.SaunaStart)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.SaunaStop)
                        </td>
                        @*<td>
                            @Html.DisplayFor(modelItem => item.TotalHours)
                        </td>*@
                

                        <td>
                            @Html.ActionLink("ON", "SaunaOn", new { id = item.Sauna_ID }) |
                            @Html.ActionLink("OFF", "SaunaOff", new { id = item.Sauna_ID }) |
                            @Html.ActionLink("Edit", "Edit", new { id = item.Sauna_ID }) |
                            @Html.ActionLink("Details", "Details", new { id = item.Sauna_ID }) |
                            @Html.ActionLink("Delete", "Delete", new { id = item.Sauna_ID })
                        </td>
                    </tr>
                }

            </table>

        </div>
    </div>
</div>


<script src="~/Scripts/jquery-2.2.4.min.js"></script>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.js"></script>

@Styles.Render("~/Content/css")
@Scripts.Render("~/bundles/modernizr")

@section Scripts {

    @Scripts.Render("~/bundles/jqueryval")

}
